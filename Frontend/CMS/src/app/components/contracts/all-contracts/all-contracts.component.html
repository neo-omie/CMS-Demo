<app-loader *ngIf="loading"></app-loader>
<h2 class="mt-3">Contracts List - All</h2>
<div *ngIf="!loading" class="table-responsive p-3">
  <button class="btn btn-outline-primary mb-2">
    <a routerLink="/contracts/addNewContract"><i class="fa-solid fa-file-circle-plus"></i> Add New Contract</a>
  </button>
  <table class="table align-middle table-bordered table-striped">
    <thead>
      <tr>
        <th>Contract ID</th>
        <th>Contract Name</th>
        <th>Contract Type</th>
        <th>Department Name</th>
        <th>Effective Date</th>
        <th>Expiry Date</th>
        <th>To Be Renewed On</th>
        <th>Addendum Date</th>
        <th>Status</th>
        <th>Approval Pending From</th>
        <th>Renewal Contract Person</th>
        <th>Renewal Due In</th>
        <th>Location</th>
        <th>Total Records</th>
        <th>Actions</th>
      </tr>
    </thead>
      <tbody>    
        <tr  *ngFor="let cont of allContracts;">
            <td>{{cont.contractID}}</td>
            <td>{{cont.contractName}}</td>
            <td>{{cont.contractType}}</td>
            <td>{{cont.departmentName}}</td>
            <td>{{cont.effectiveDate}}</td>
            <td>{{cont.expiryDate}}</td>
            <td>{{cont.toBeRenewedOn}}</td>
            <td>{{cont.addendumDate}}</td>
            <td *ngIf="cont.status == 1"><button class="btn btn-warning" disabled><b>Pending Approval</b></button></td>
            <td *ngIf="cont.status == 2"><button class="btn btn-success" disabled><b>Active</b></button></td>
            <td *ngIf="cont.status == 3"><button class="btn btn-danger" disabled><b>Rejected</b></button></td>
            <td *ngIf="cont.status == 4"><button class="btn btn-dark" disabled><b>Terminated</b></button></td>
            <td *ngIf="cont.status == 5"><button class="btn btn-secondary" disabled><b>Expired</b></button></td>
            <td>{{cont.approvalPendingFrom}}</td>
            <td>{{cont.renewalContractPerson}}</td>
            <td>{{cont.renewalDueIn}}</td>
            <td>{{cont.location}}</td>
            <td>{{cont.totalRecords}}</td>
             <td>
               <!-- <i class="fa-regular fa-pen-to-square icon" data-bs-toggle="modal" data-bs-target="#contract-edit" (click)="GetContract(cont.contractID)"></i>    -->
               <i class="fa-regular fa-eye icon" data-bs-toggle="modal" data-bs-target="#contract-detail" (click)="GetContract(cont.contractID)"></i>
               <i class="fa-regular fa-trash-can icon" data-bs-toggle="modal" data-bs-target="#contract-delete" (click)="DeleteContract(cont.contractID)"></i></td>
        </tr>
    </tbody>
  </table>

  <nav class="d-flex justify-content-center" *ngIf="allContracts!=undefined && allContracts.length > 0" aria-label="Page navigation example">
    <ul *ngIf="maxPage > 1" class="pagination">
      <li *ngIf="maxPage > 5" class="page-item" (click)="GetPage(1)"><span class="page-link" aria-label="FirstPage">&laquo;</span></li>
      <li *ngIf="maxPage > 5" class="page-item" (click)="GetPage(pageNumbers[0] - 1)"><span class="page-link" aria-label="Previous">&lsaquo;</span></li>
      <li class="page-item" (click)="GetPage(pageNumbers[1])"><span [class]="pageNumbers[0] == pageNumbers[1] ? 'page-link active' : 'page-link'">{{pageNumbers[1]}}</span></li>
      <li *ngIf="maxPage > 1" class="page-item" (click)="GetPage(pageNumbers[2])"><span [class]="pageNumbers[0] == pageNumbers[2] ? 'page-link active' : 'page-link'">{{pageNumbers[2]}}</span></li>
      <li *ngIf="maxPage > 2" class="page-item" (click)="GetPage(pageNumbers[3])"><span [class]="pageNumbers[0] == pageNumbers[3] ? 'page-link active' : 'page-link'">{{pageNumbers[3]}}</span></li>
      <li *ngIf="maxPage > 3" class="page-item" (click)="GetPage(pageNumbers[4])"><span [class]="pageNumbers[0] == pageNumbers[4] ? 'page-link active' : 'page-link'">{{pageNumbers[4]}}</span></li>
      <li *ngIf="maxPage > 4" class="page-item" (click)="GetPage(pageNumbers[5])"><span [class]="pageNumbers[0] == pageNumbers[5] ? 'page-link active' : 'page-link'">{{pageNumbers[5]}}</span></li>
      <li *ngIf="maxPage > 5" class="page-item" (click)="GetPage(pageNumbers[0] + 1)"><span class="page-link" aria-label="Next">&rsaquo;</span></li>
      <li *ngIf="maxPage > 5" class="page-item" (click)="GetPage(maxPage)"><span class="page-link" aria-label="LastPage">&raquo;</span></li>
    </ul>
  </nav>

  <div class="modal fade" id="contract-detail" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header d-flex justify-content-between">
          <h1 style="color: whitesmoke;" class="modal-title fs-5 fw-bolder">Contract Details</h1>
          <button type="button" class="btn close-btn" data-bs-dismiss="modal" aria-label="Close"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <h1 class="modal-title fs-6 mb-3">Contract Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.contractId}}</b></span>
                <input type="text" name="contractName" class="form-control" id="contractName" [value]="contractDetails?.contractName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Department Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.departmentId}}</b></span>
                <input type="text" name="departmentName" class="form-control" id="departmentName" [value]="contractDetails?.departmentName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Contract With Company Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.contractWithCompanyId}}</b></span>
                <input type="text" name="contractWithCompanyName" class="form-control" id="contractWithCompanyName" [value]="contractDetails?.contractWithCompanyName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Contract Type Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.contractTypeId}}</b></span>
                <input type="text" name="contractTypeName" class="form-control" id="contractTypeName" [value]="contractDetails?.contractTypeName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Apostille Type Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.apostilleTypeId}}</b></span>
                <input type="text" name="apostilleTypeName" class="form-control" id="apostilleTypeName" [value]="contractDetails?.apostilleTypeName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Actual Document Reference No.</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-file-lines"></i></span>
                <input type="text" name="actualDocRefNo" class="form-control" id="actualDocRefNo" [value]="contractDetails?.actualDocRefNo" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Retainer Contract Type</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-file-invoice"></i></span>
                <input type="text" *ngIf="contractDetails?.retainerContract == 1" name="retainerContract" class="form-control" id="retainerContract" value="None" disabled>
                <input type="text" *ngIf="contractDetails?.retainerContract == 2" name="retainerContract" class="form-control" id="retainerContract" value="Weekly" disabled>
                <input type="text" *ngIf="contractDetails?.retainerContract == 3" name="retainerContract" class="form-control" id="retainerContract" value="Monthly" disabled>
                <input type="text" *ngIf="contractDetails?.retainerContract == 4" name="retainerContract" class="form-control" id="retainerContract" value="Quarterly" disabled>
                <input type="text" *ngIf="contractDetails?.retainerContract == 5" name="retainerContract" class="form-control" id="retainerContract" value="Yearly" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Terms & Conditions</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-receipt"></i></span>
                <textarea name="termsAndConditions" class="form-control" id="termsAndConditions" [value]="contractDetails?.termsAndConditions" disabled></textarea>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Valid From</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-calendar-days"></i></span>
                <input type="datetime-local" name="validFrom" class="form-control" id="validFrom" [value]="contractDetails?.validFrom" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Valid Till</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-calendar-xmark"></i></span>
                <input type="datetime-local" name="validTill" class="form-control" id="validTill" [value]="contractDetails?.validTill" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Renewal From</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-calendar-days"></i></span>
                <input type="datetime-local" name="renewalFrom" class="form-control" id="renewalFrom" [value]="contractDetails?.renewalFrom" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Renewal Till</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-calendar-xmark"></i></span>
                <input type="datetime-local" name="renewalTill" class="form-control" id="renewalTill" [value]="contractDetails?.renewalTill" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Addendum Date</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-calendar-plus"></i></span>
                <input type="datetime-local" name="addendumDate" class="form-control" id="addendumDate" [value]="contractDetails?.addendumDate" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Employee Custodian Name</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><b>{{contractDetails?.empCustodianId}}</b></span>
                <input type="text" name="empCustodianName" class="form-control" id="empCustodianName" [value]="contractDetails?.empCustodianName" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Location</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-location-dot"></i></span>
                <input type="text" name="location" class="form-control" id="location" [value]="contractDetails?.location" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Approver L1 Status</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-person-circle-check"></i><b>1</b></span>
                <input *ngIf="contractDetails?.approver1Status == 1" type="text" name="approver1Status" class="form-control" id="approver1Status" value="Pending Approval" style="background-color: yellow;" disabled>
                <input *ngIf="contractDetails?.approver1Status == 2" type="text" name="approver1Status" class="form-control" id="approver1Status" value="Active" style="background-color: greenyellow;" disabled>
                <input *ngIf="contractDetails?.approver1Status == 3" type="text" name="approver1Status" class="form-control" id="approver1Status" value="Rejected" style="background-color: orangered;" disabled>
                <input *ngIf="contractDetails?.approver1Status == 4" type="text" name="approver1Status" class="form-control" id="approver1Status" value="Terminated" disabled>
                <input *ngIf="contractDetails?.approver1Status == 5" type="text" name="approver1Status" class="form-control" id="approver1Status" value="Expired" style="background-color: darkgray;" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Approver L2 Status</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-person-circle-check"></i><b>2</b></span>
                <input type="text" name="approver2Status" class="form-control" id="approver2Status" [value]="contractDetails?.approver2Status" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Approver L3 Status</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-person-circle-check"></i><b>3</b></span>
                <input type="text" name="approver3Status" class="form-control" id="approver3Status" [value]="contractDetails?.approver3Status" disabled>
            </div>
          </div>
          <h1 class="modal-title fs-6 mb-3">Does exists or deleted?</h1>
          <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-toggle-on"></i></span>
                <input type="text" name="isDeleted" class="form-control" id="isDeleted" [value]="contractDetails?.isDeleted" disabled>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
